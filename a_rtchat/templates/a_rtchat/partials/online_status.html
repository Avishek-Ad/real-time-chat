<div id="online-user-count" hx-swap-oob="outerHtml">
    {% if online_users %}
    <span class="bg-red-500 rounded-lg pt-1 pb-2 px-2 text-white text-sm ml-4">
        {{ online_users.count }} online
    </span>
    {% endif %}
</div>

<div id="online-in-chats">
    {% if online_in_chats %}
        <div class="rounded-full bg-green-500 p-1.5 absolute top-2 right-2 z-20"></div>
    {% endif %}
</div>


<ul id="chats-list" class="hoverlist [&>li>a]:justify-end">
    <li class="relative">
        {% if public_chat_users %}
            <div class="rounded-full bg-green-500 p-1.5 absolute top-2 left-2 z-20"></div>
        {% else %}
            <div class="rounded-full bg-gray-500 p-1.5 absolute top-2 left-2 z-20"></div>
        {% endif %}
        <a href="{% url 'home' %}">Public Chat</a>
    </li>
    {% for chatroom in user.chat_groups.all %}
    {% if chatroom.groupchat_name %}
    <li class="relative">
        {% if group_chat_with_users %}
            <div class="rounded-full bg-green-500 p-1.5 absolute top-2 left-2 z-20"></div>
        {% else %}
            <div class="rounded-full bg-gray-500 p-1.5 absolute top-2 left-2 z-20"></div>
        {% endif %}
        <a class="leading-5 text-right" href="{% url "chatroom" chatroom.group_name %}">
            {{ chatroom.groupchat_name |slice:":30" }}
        </a> 
    </li>
    {% endif %}
    {% endfor %}
    {% for chatroom in user.chat_groups.all %}
        {% if chatroom.is_private %}
            {% for member in chatroom.members.all %}
                {% if member != user %}
                    <li class="relative">
                        {% if private_chat_with_users %}
                            <div class="rounded-full bg-green-500 p-1.5 absolute top-2 left-2 z-20"></div>
                        {% else %}
                            <div class="rounded-full bg-gray-500 p-1.5 absolute top-2 left-2 z-20"></div>
                        {% endif %}
                        <a href="{% url 'chatroom' chatroom.group_name %}">
                            {{ member.profile.name }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
</ul>